(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(i=!1)}i&&(r.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},r=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/police-killings/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"32d8":function(t,e,n){"use strict";n("6297")},4835:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"pt-5 pb-4"},[n("DepartmentSelector",{attrs:{departments:t.departments},on:{childToParent:t.receiveDepartmentName}}),n("br"),n("StateSelector",{on:{childToParent:t.receiveStateName}}),t.computedData.length>0&&t.selected?n("TopLevelText",{attrs:{dataLength:t.computedData.length,selected:t.selected,filterType:t.filterType,personSelected:t.personSelected}}):t._e()],1),t.computedData.length>0&&t.selected?n("ForceDiagram",{attrs:{data:t.computedData,radius:t.radius},on:{childToParent:t.receivePersonSelected}}):t._e(),n("Footer")],1)},r=[],s=n("1da1"),o=(n("96cf"),n("d81d"),n("4de4"),n("caad"),n("2532"),n("159b"),n("5698")),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"padding"},[n("div",{staticClass:"is-inline"},[n("div",{staticClass:"my-3"},[n("div",{staticClass:"is-inline buttons has-addons"},t._l(t.groupingVariables,(function(e,i){return n("button",{key:i,staticClass:"is-inline heading mb-0 button",class:[t.selected===e?"is-dark":""],on:{click:function(n){return t.splitBubbles(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])]),n("div",{attrs:{id:"container"}},[n("svg",{attrs:{id:"diagram"}},t._l(t.data,(function(e,i){return n("Bubble",{directives:[{name:"touch",rawName:"v-touch",value:t.changeText,expression:"changeText"}],key:i,attrs:{r:t.radius,cx:e.x,cy:e.y}})})),1),n("div",{staticClass:"tooltip",attrs:{id:"tooltip"}})])])},l=[],u=n("2909"),h=(n("a9e3"),n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("13d5"),n("b64b"),n("fb6a"),n("498a"),n("b0c0"),n("b047")),d=n.n(h),m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("circle",{directives:[{name:"touch",rawName:"v-touch",value:t.$emit("click"),expression:"$emit('click')"}],staticClass:"circle",attrs:{r:t.r,cx:t.cx,cy:t.cy},on:{mouseover:t.showTooltip,mouseout:t.hideTooltip,mouseenter:t.highlightCircle,mouseleave:t.unhighlightCircle,click:function(e){return t.$emit("click")}}})},p=[],f=(n("99af"),n("ac1f"),n("5319"),n("1276"),{name:"Bubble",props:{r:Number,cx:Number,cy:Number},watch:{},methods:{showTooltip:function(t){var e=this,n=t.originalTarget.__data__,i=o["h"]("#tooltip").style("opacity",0).attr("class","tooltip");i.transition().duration(500).style("opacity",1);var a="<p class='title is-size-6 mb-1 has-text-centered has-text-black'> ".concat(n.Name," </p> \n\t\t\t<p class='is-size-7 has-text-centered'>").concat(e.ageFunction(n.Age)," ").concat(e.raceFunction(n.Race)," ").concat(e.sexFunction(n.Sex),".\n\t\t\t<p class='is-size-7 has-text-centered'>Killed by ").concat(n["Agencies responsible for death"].replace(/,(?=[^,]*$)/," and")," on ").concat(e.dateFunction(n.Date),".");i.html(a).style("left",t.pageX>.8*this.w?t.pageX-250+"px":t.pageX+30+"px").style("top",t.pageY-30+"px")},hideTooltip:function(){var t=o["h"]("#tooltip");t.transition().duration(500).style("opacity",0)},highlightCircle:function(t){o["i"].prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))};var e=t.originalTarget;o["h"](e).moveToFront().transition().attr("r",2*this.r)},unhighlightCircle:function(t){var e=t.originalTarget;o["h"](e).transition().attr("r",this.r)},ageFunction:function(t){return isNaN(t)|0==t?"A":"A ".concat(t," year old")},raceFunction:function(t){return void 0==t|"Unknown Race"==t?"":t},sexFunction:function(t){return"Male"==t|"Female"==t?t.toLowerCase():"person"},pronounFunction:function(t){return"Male"==t?"He was":"Female"==t?"She was":"They were"},oneOfThemFunction:function(t){return 1==t?"was that person.":"was one of them."},dateFunction:function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],n=t.replace("T","-").split("-");return"".concat(e[Number(n[1]-1)]," \n\t\t\t\t").concat(n[2],", ").concat(n[0])}}}),b=f,g=(n("32d8"),n("2877")),v=Object(g["a"])(b,m,p,!1,null,null,null),w=v.exports,y={name:"ForceDiagram",props:{data:Array,radius:Number},components:{Bubble:w},data:function(){return{w:.95*window.innerWidth,h:.5*window.innerHeight,simulation:null,svg:null,circles:null,xStrength:.1,yStrength:.1,iterations:2,chargeStrength:-2,collideStrength:1,groupingVariables:["All","Race","Sex","Encounter Type","Armed Status","Cause of death","Year"],selected:"All",personSelected:{name:null,url:null},simulationFinished:!1}},mounted:function(){this.w=.95*window.innerWidth,this.h=.5*window.innerHeight,this.instantiate()},computed:{},methods:{instantiate:function(){var t=this;this.svg=o["h"]("#diagram").attr("width",this.w).attr("height",this.h),this.simulation&&this.simulation.stop(),this.simulation=o["c"]().velocityDecay(.5).force("collide",o["b"]().radius(this.radius).strength(this.collideStrength).iterations(this.iterations)).force("y",o["e"]().y(this.h/2).strength(this.yStrength)).force("x",o["d"]().x(this.w/2).strength(this.xStrength)).tick(this.iterations).on("tick",n),this.circles=this.svg.selectAll(".circle").data(this.data).attr("r",this.radius).style("stroke","black").style("fill",(function(e){return t.colorScale(e.Race)})).style("stroke-width",1).style("pointer-events","all");var e=this;function n(){e.circles.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))}this.simulation.nodes(this.data).on("tick",n).alpha(1).restart()},splitBubbles:function(t){var e=this;if(this.simulation&&this.simulation.stop(),this.selected=t,"All"==t)this.groupBubbles();else{this.centerScale=o["g"]().padding(.8).range([0,this.w]);var n=this.data,i=n.map((function(e){return e[t]})),a=new Set(Object(u["a"])(i));if(("Cause of death"==t|"Encounter Type"==t)&a.size>4){var r=i.reduce((function(t,e){return t[e]=(t[e]||0)+1,t}),{}),s=Object.keys(r),c=s.sort((function(t,e){return r[e]-r[t]}));i=c.slice(0,3),i.push("Other"),"Cause of death"==t?n.forEach((function(t){t["Cause of death"]=i.includes(t["Cause of death"])?t["Cause of death"]:"Other"})):"Encounter Type"==t&&n.forEach((function(t){t["Encounter Type"]=i.includes(t["Encounter Type"])?t["Encounter Type"]:"Other"}))}this.centerScale.domain(i),this.showTitles(this.centerScale);var l=this,h=function(){l.circles.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))};this.simulation.force("x",o["d"]().x((function(n){return e.centerScale(n[t])})).strength(this.xStrength)).force("collide",o["b"]().radius(this.radius).strength(this.collideStrength).iterations(this.iterations)),this.simulation.on("tick",h).alpha(1).restart()}},groupBubbles:function(){this.simulation&&this.simulation.stop(),this.hideTitles();var t=this;function e(){t.circles.attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y}))}this.simulation.force("x",o["d"]().x(this.w/2).strength(this.xStrength)).force("y",o["e"]().y(this.h/2).strength(this.yStrength)).force("collide",o["b"]().radius(this.radius).strength(this.collideStrength).iterations(this.iterations)),this.simulation.on("tick",e).alpha(1).restart()},showTitles:function(t){var e=this,n=this.svg,i=t.domain(),a=[],r=this.w<768?40:38,s=30,c=n.selectAll(".label-text").data(i),l=n.selectAll(".rect").data(i);n.append("g").selectAll(".dummyText").data(i).enter().append("text").attr("class","label-text").text((function(t){return t})).each((function(){var t=1.2*this.getComputedTextLength();a.push(t),this.remove()})),l.enter().append("rect").attr("class","rect").merge(l).attr("x",(function(e){return t(e)})).attr("rx",5).attr("y",(function(t,n){return i.length>3&&e.w<600&&n%2?2*r:r})).attr("transform",(function(t,e){return"translate(-".concat(a[e]/2,", -20)")})).attr("width",(function(t,e){return a[e]})).attr("height",s),c.enter().append("text").attr("class","label-text").merge(c).attr("x",(function(e){return t(e)})).attr("y",(function(t,n){return i.length>3&&e.w<600&&n%2?2*r:r})).attr("dy",1).text((function(t){return t})).attr("text-anchor","middle"),o["i"].prototype.moveToFront=function(){return this.each((function(){this.parentNode.appendChild(this)}))},l.moveToFront(),c.moveToFront(),c.exit().remove(),l.exit().remove()},hideTitles:function(){this.svg.selectAll(".label-text").remove(),this.svg.selectAll(".rect").remove()},colorScale:function(t){var e=o["f"]().domain(["Black","White","Asian","Hispanic","Unknown Race","Unknown race","Pacific Islander","Native American"]).range(["#BE3137","#FFC600","#59B359","#4E070C","#7B48AD","#7B48AD","#E96200","#5F96CE"]);return e(t)},locFunction:function(t){return""==t.trim()?"Houston Police Department (TX)":t},changeText:function(t){var e=t.target.__data__;this.personSelected.name="Name withheld by police"==e.Name?"this victim":e.Name,this.personSelected.url=e.Link,this.$emit("childToParent",this.personSelected)},watchResize:function(){this.simulation.stop(),this.selected="All",this.hideTitles(),this.w=.95*window.innerWidth,this.h=.5*window.innerHeight,this.instantiate(),this.splitBubbles("All")}},created:function(){window.addEventListener("resize",d()(this.watchResize,1e3))},destroyed:function(){window.removeEventListener("resize",d()(this.watchResize,1e3))},watch:{}},x=y,S=(n("7e66"),Object(g["a"])(x,c,l,!1,null,null,null)),T=S.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-inline-flex mb-3-mobile"},[n("p",{staticClass:"has-text-black vertical-center is-size-4 has-text-weight-bold mr-3 mb-3 mr-0-mobile"},[t._v(" Police Killings by the ")]),n("b-field",{staticStyle:{"min-width":"350px"}},[n("b-autocomplete",{attrs:{rounded:"",data:t.filteredDepartmentList,placeholder:"Houston Police Department (TX)"},on:{select:function(e){return t.selected=e},typing:function(e){t.selected=null}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}},[n("template",{slot:"empty"},[t._v("No results found")])],2)],1)],1)},C=[],k=(n("25f0"),{name:"DepartmentSelector",props:{departments:Array},data:function(){return{selected:"Houston Police Department (TX)",department:""}},mounted:function(){},watch:{selected:function(t){this.$emit("childToParent",t)}},computed:{filteredDepartmentList:function(){var t=this;return this.departments.filter((function(e){return e.toString().toLowerCase().indexOf(t.department.toLowerCase())>=0}))}},methods:{}}),A=k,N=Object(g["a"])(A,_,C,!1,null,"7b576c7c",null),D=N.exports,O=function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"is-flex is-justify-content-center mb-3-mobile"},[i("p",{staticClass:"has-text-dark vertical-center is-size-6 has-text-weight-lighter mr-3"},[e._v(" Or filter by state instead: ")]),i("b-field",{staticStyle:{width:"150px"}},[i("b-autocomplete",{attrs:{size:"is-small",rounded:"",data:e.filteredStateList},on:{select:function(n){return e.selected=t.stateList.find((function(t){return t.name==n})).abbr},typing:function(t){e.selected=null}},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[i("template",{slot:"empty"},[e._v("No results found")])],2)],1)],1)},F=[],L=(n("7db0"),{name:"StateSelector",props:{},data:function(){return{selected:"",state:"",stateList:[{name:"Alabama",abbr:"AL"},{name:"Alaska",abbr:"AK"},{name:"Arizona",abbr:"AZ"},{name:"Arkansas",abbr:"AR"},{name:"California",abbr:"CA"},{name:"Colorado",abbr:"CO"},{name:"Connecticut",abbr:"CT"},{name:"Delaware",abbr:"DE"},{name:"District Of Columbia",abbr:"DC"},{name:"Florida",abbr:"FL"},{name:"Georgia",abbr:"GA"},{name:"Hawaii",abbr:"HI"},{name:"Idaho",abbr:"ID"},{name:"Illinois",abbr:"IL"},{name:"Indiana",abbr:"IN"},{name:"Iowa",abbr:"IA"},{name:"Kansas",abbr:"KS"},{name:"Kentucky",abbr:"KY"},{name:"Louisiana",abbr:"LA"},{name:"Maine",abbr:"ME"},{name:"Maryland",abbr:"MD"},{name:"Massachusetts",abbr:"MA"},{name:"Michigan",abbr:"MI"},{name:"Minnesota",abbr:"MN"},{name:"Mississippi",abbr:"MS"},{name:"Missouri",abbr:"MO"},{name:"Montana",abbr:"MT"},{name:"Nebraska",abbr:"NE"},{name:"Nevada",abbr:"NV"},{name:"New Hampshire",abbr:"NH"},{name:"New Jersey",abbr:"NJ"},{name:"New Mexico",abbr:"NM"},{name:"New York",abbr:"NY"},{name:"North Carolina",abbr:"NC"},{name:"North Dakota",abbr:"ND"},{name:"Ohio",abbr:"OH"},{name:"Oklahoma",abbr:"OK"},{name:"Oregon",abbr:"OR"},{name:"Pennsylvania",abbr:"PA"},{name:"Rhode Island",abbr:"RI"},{name:"South Carolina",abbr:"SC"},{name:"South Dakota",abbr:"SD"},{name:"Tennessee",abbr:"TN"},{name:"Texas",abbr:"TX"},{name:"Utah",abbr:"UT"},{name:"Vermont",abbr:"VT"},{name:"Virginia",abbr:"VA"},{name:"Washington",abbr:"WA"},{name:"West Virginia",abbr:"WV"},{name:"Wisconsin",abbr:"WI"},{name:"Wyoming",abbr:"WY"}]}},mounted:function(){},watch:{selected:function(t){this.$emit("childToParent",t)}},computed:{filteredStateList:function(){var t=this,e=this.stateList.map((function(t){return t.name}));return e.filter((function(e){return e.toString().toLowerCase().indexOf(t.state.toLowerCase())>=0}))},stateNameToAbbr:function(){var t=this;return this.selected?this.stateList.find((function(e){return e.name==t.selected})).abbr:null}},methods:{}}),E=L,M=Object(g["a"])(E,O,F,!1,null,"feab4846",null),P=M.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"subtitle is-size-6-mobile mt-5 px-1"},[n("p",{staticClass:"has-text-black"},[t._v(" Between 2013 and 2021, the "+t._s("state"==this.filterType?t.selected+" police ":t.selected)+" killed "),n("span",{staticClass:"has-text-weight-semibold"},[t._v(t._s(t.dataLength)+" "+t._s(this.personFunction))]),t._v(". ")]),n("div",{staticClass:"mt-2"},[t.personSelected?n("a",{staticClass:"inline-link",attrs:{href:t.personSelected.url,target:"_blank",rel:"noopener noreferrer"}},["this victim"==t.personSelected.name?n("span",[t._v("This victim's name was withheld by police. ↗")]):n("span",[n("span",{staticClass:"has-text-weight-bold"},[t._v(t._s(t.personSelected.name)+" ↗")]),t._v(" was one of them.")])]):n("p",[t._v("Do you know their "+t._s(this.namePlural)+"?")])])])},z=[],R={name:"TopLevelText",props:{dataLength:Number,selected:String,filterType:String,personSelected:Object},data:function(){return{}},mounted:function(){},watch:{},computed:{personFunction:function(){return 1==this.dataLength?"person":"people"},namePlural:function(){return this.dataLength>1?"names":"name"}},methods:{}},H=R,$=(n("d49f"),Object(g["a"])(H,j,z,!1,null,"79b69b6f",null)),B=$.exports,I=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},W=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[n("p",[t._v(" Diagram by "),n("a",{staticClass:"link",attrs:{href:"https://twitter.com/CL_Rothschild",target:"_blank",rel:"noopener"}},[t._v(" Connor Rothschild")])])])}],V={name:"TopLevelText",props:{dataLength:Number,selected:String},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{}},K=V,X=(n("b8ba"),Object(g["a"])(K,I,W,!1,null,"7f4fa006",null)),J=X.exports,Y={name:"App",components:{ForceDiagram:T,StateSelector:P,DepartmentSelector:D,TopLevelText:B,Footer:J},data:function(){return{killings:[],departments:[],w:.95*window.innerWidth,h:.5*window.innerHeight,radius:null,selected:"Houston Police Department (TX)",filterType:"department",personSelected:null}},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["a"]("./data/cleaned.csv");case 2:return n=e.sent,t.killings=n,e.next=6,o["a"]("./data/departments.csv");case 6:i=e.sent,t.departments=i.map((function(t){return t.all_agencies}));case 8:case"end":return e.stop()}}),e)})))()},computed:{filteredData:function(){var t,e=this;return"department"==this.filterType?t=this.killings.filter((function(t){return t["Agency responsible for death"].includes(e.selected)})):"state"==this.filterType&&(t=this.killings.filter((function(t){return t.State.includes(e.selected)}))),t},computedData:function(){var t=this,e=this.filteredData;return e.forEach((function(e){e.Age=+e.Age,e.x=t.w/2,e.y=t.h/2})),e},radiusFunction:function(){var t,e=this.computedData.length,n=this.w,i=this.h,a=2*n+2*i;return t=e>1e3?a/e*2:e>500?a/e:e>200?a/e/3:e>100?a/e/4:e>50?a/e/5:e>25?a/e/7.5:e>10?a/e/10:a/e/12.5,t}},methods:{watchResize:function(){this.w=.9*window.innerWidth,this.h=.5*window.innerHeight,this.radius=this.radiusFunction},receiveStateName:function(t){this.filterType="state",this.selected=t,this.personSelected=null},receiveDepartmentName:function(t){this.filterType="department",this.selected=t,this.personSelected=null},receivePersonSelected:function(t){this.personSelected=t}},created:function(){window.addEventListener("resize",d()(this.watchResize,1e3))},destroyed:function(){window.removeEventListener("resize",d()(this.watchResize,1e3))},watch:{computedData:function(){this.radius=this.radiusFunction},w:function(){this.radius=this.radiusFunction},h:function(){this.radius=this.radiusFunction}}},U=Y,G=(n("034f"),Object(g["a"])(U,a,r,!1,null,null,null)),Z=G.exports,q=n("289d"),Q=(n("5abe"),n("0086")),tt=n.n(Q);i["a"].use(tt.a),i["a"].use(q["a"]),i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(Z)}}).$mount("#app")},6297:function(t,e,n){},"7e66":function(t,e,n){"use strict";n("f8c9")},"85ec":function(t,e,n){},"867b":function(t,e,n){},b8ba:function(t,e,n){"use strict";n("867b")},d49f:function(t,e,n){"use strict";n("4835")},f8c9:function(t,e,n){}});
//# sourceMappingURL=app.6be2fca2.js.map